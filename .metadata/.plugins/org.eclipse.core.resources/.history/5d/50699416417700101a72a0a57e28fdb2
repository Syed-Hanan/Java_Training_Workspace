package com.sutherland.library.service;

import java.util.List;
import java.util.Optional;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Service;
import org.springframework.web.bind.annotation.PostMapping;

import com.sutherland.library.entity.Book;
import com.sutherland.library.repo.BookRepository;

@Service
public class BookServiceImpl implements BookService{
	@Autowired
	BookRepository repo;
//	@Override
//	public void addBook(Book book) {
//		repo.save(book);		
//	}
//	@Override
//	public List<Book> getAllBooks() {
//		return repo.findAll();
//	}
//	@Override
//	public Book getBookById(int bookId) { 
//		Optional<Book> book = repo.findById(bookId);
//		return book.get();
//	}
	@PostMapping
	public ResponseEntity<String> addBook(@RequestBody Book book) {
		service.addBook(book);
		return new ResponseEntity<String>("book inserted",HttpStatus.OK);
	}
	
	@GetMapping
	public ResponseEntity<List<Book>> getAllBooks(){
		return new ResponseEntity<List<Book>>(service.getAllBooks(),HttpStatus.OK);
	}
	@GetMapping("/byid/{bookid}")
	public Book getBookById(@PathVariable int bookid) {
		return service.getBookById(bookid);
	}
	@Override
	public void updateBook(Book book) {
	if(repo.existsById(book.getBookId())) {
		repo.save(book);
	}
		
	}
	@Override
	public void deleteBook(int bookId) {
		if(repo.existsById(bookId)) {
			repo.deleteById(bookId);
		}
		
	}

}
